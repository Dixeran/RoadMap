webpackJsonp([1],{"+tHt":function(t,e){},"3ZZY":function(t,e){},"75eU":function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("MVMM"),r=a("9rMa"),s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"Navbar"}},[t._m(0),t._v(" "),a("ul",{attrs:{id:"navlist"}},[a("router-link",{attrs:{to:"/"}},[t._v("路径规划")]),t._v(" "),a("router-link",{attrs:{to:"/setting"}},[t._v("参数设置")])],1),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.$store.state.city,expression:"$store.state.city"}],class:""==t.$store.state.city?"unName":"",attrs:{id:"cityName",type:"text",placeholder:"输入城市名"},domProps:{value:t.$store.state.city},on:{input:function(e){e.target.composing||t.$set(t.$store.state,"city",e.target.value)}}})])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"logo"}},[e("span",[this._v("RoadMap")])])}]};var o={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"Errorhandler"}},[this._v("\n  "+this._s(this.errorData)+"\n")])},staticRenderFns:[]};var i={name:"App",components:{Navbar:a("Z0/y")({name:"Navbar",components:{},data:function(){return{}},methods:{}},s,!1,function(t){a("3ZZY")},"data-v-50b90c1b",null).exports,Errorhandler:a("Z0/y")({name:"Errorhandler",props:["errorData"]},o,!1,function(t){a("zpZT")},"data-v-0ea0fdf0",null).exports},methods:{errorConfirmed:function(t){this.error=""},HandleError:function(t){this.error=t}},data:function(){return{error:""}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("Navbar"),t._v(" "),a("transition",{attrs:{name:"slide"}},[""!=t.error?a("Errorhandler",{attrs:{errorData:t.error},nativeOn:{click:function(e){return t.errorConfirmed(e)}}}):t._e()],1),t._v(" "),a("keep-alive",{attrs:{include:"Roadpage"},on:{error:t.HandleError}},[a("router-view")],1)],1)},staticRenderFns:[]};var c=a("Z0/y")(i,l,!1,function(t){a("xxql")},null,null).exports,d=a("zO6J"),u={name:"Checklist",mounted:function(){var t=this,e=new XMLHttpRequest;e.open("get","https://v1.hitokoto.cn/?c=d"),e.onreadystatechange=function(){if(4===e.readyState){var a=JSON.parse(e.responseText);"。"==a.hitokoto[a.hitokoto.length-1]&&(a.hitokoto=a.hitokoto.substring(0,a.hitokoto.length-1)),t.hitokoto=a}},e.send()},data:function(){return{hitokoto:{}}},computed:{mapState:function(){return this.$store.state}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"Checklist"}},[a("el-row",{attrs:{justify:"end",type:"flex"}},[a("el-col",{attrs:{span:20}},[a("h1",{staticClass:"text",attrs:{id:"hTitle"}},[t._v(t._s(t.mapState.city)+" "+t._s(t.mapState.POIs.length)+" 日游")])])],1),t._v(" "),a("el-row",{attrs:{justify:"end",type:"flex"}},[a("el-col",{attrs:{span:16}},[a("h2",{staticClass:"text",attrs:{id:"mTitle"}},[t._v(t._s(t.hitokoto.hitokoto))]),t._v(" "),a("h2",{staticClass:"text",attrs:{id:"mTitle"}},[t._v("—— 《"+t._s(t.hitokoto.from)+"》")])])],1),t._v(" "),t._l(t.$store.state.POIs,function(e,n){return a("el-row",{key:n,staticClass:"block",attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:4}},[a("h3",{staticClass:"text dTitle"},[t._v("Day "+t._s(n+1))])]),t._v(" "),a("el-col",{attrs:{span:20}},[a("el-table",{attrs:{data:e}},[a("el-table-column",{attrs:{prop:"detail.name",label:"名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"detail.address",label:"地址"}}),t._v(" "),a("el-table-column",{attrs:{prop:"detail.name",label:"Tag"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",[t._v(t._s(e.row.detail.type.split(";")[0]))]),t._v(" "),e.row.detail.groupby?a("el-tag",[t._v("团购")]):t._e()]}}])})],1)],1)],1)})],2)},staticRenderFns:[]};var p=a("Z0/y")(u,f,!1,function(t){a("RtWC")},"data-v-3bc7a45f",null).exports,m=a("HOBB"),h=a.n(m),v={name:"Detailpath",data:function(){return{transPlan:[{data:"driving",name:"驾车"},{data:"bus",name:"公交"},{data:"ride",name:"骑行"},{data:"walk",name:"步行"}]}},methods:{},updated:function(){var t=this,e=document.getElementById("nodex");h.a.create(e,{animation:120,handle:".cd-main",draggable:".nodeCard",supportPointer:!1,onStart:function(e){t.$emit("drag")},onEnd:function(e){if(t.$emit("drag"),e.oldIndex!==e.newIndex){if(e.oldIndex<e.newIndex){var a=e.from.childNodes[e.oldIndex];e.from.insertBefore(e.item,a)}else{var n=e.from.childNodes[e.oldIndex+1]||null;n?e.from.insertBefore(e.item,n):e.from.appendChild(e.item)}t.$emit("sort",e.oldIndex,e.newIndex)}},setData:function(t,e){t.setData("ItemIndex",e.getAttribute("index"))}})}},y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"Detailpath"}},[a("div",{attrs:{id:"daySelector"}},[a("div",{attrs:{id:"selector"}},[a("a",{attrs:{href:"#"},on:{click:function(e){t.$store.commit("switchDay",t.$store.state.nowDay-1)}}},[a("i",{staticClass:"iconfont icon-left"})]),t._v(" "),a("span",[t._v("第"),a("span",[t._v(t._s(t.$store.state.nowDay+1))]),t._v("天")]),t._v(" "),a("a",{attrs:{href:"#"},on:{click:function(e){t.$store.commit("switchDay",t.$store.state.nowDay+1)}}},[a("i",{staticClass:"iconfont icon-right"})]),t._v(" "),a("a",{attrs:{href:"#"},on:{click:function(e){t.$store.commit("addNewDay")}}},[a("i",{staticClass:"iconfont icon-plus"})]),t._v(" "),a("a",{staticClass:"alert",attrs:{href:"#"},on:{click:function(e){t.$store.commit("deleteDay",t.$store.state.nowDay)}}},[a("i",{staticClass:"iconfont icon-minus"})])]),t._v(" "),a("div",{attrs:{id:"total"},on:{click:function(e){t.$emit("updateTransferPlan",5,5)}}},[t._v("\n      共"+t._s(t.$store.state.totalDays)+"天\n    ")])]),t._v(" "),a("div",{attrs:{id:"paths"}},[a("ul",{attrs:{id:"nodex"}},[t._l(t.$store.state.POIs[t.$store.state.nowDay],function(e,n){return[a("div",{key:e.name,staticClass:"nodeCard",attrs:{index:n}},[e.transfer?a("div",{staticClass:"cd-select-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.transfer.type,expression:"item.transfer.type"}],staticClass:"cd-select",attrs:{name:"cd-method"},on:{change:[function(a){var n=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(e.transfer,"type",a.target.multiple?n:n[0])},function(a){t.$emit("updateTransferPlan",n,e.transfer.type)}]}},t._l(t.transPlan,function(e){return a("option",{key:e.data,domProps:{value:e.data}},[t._v("\n                "+t._s(e.name)+"\n              ")])})),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.transfer.index,expression:"item.transfer.index"}],staticClass:"cd-select",attrs:{name:"cd-plan"},on:{change:[function(a){var n=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(e.transfer,"index",a.target.multiple?n:n[0])},function(a){t.$emit("updateTransferIndex",n,e.transfer.index)}]}},t._l((e.transfer.plan.routes||e.transfer.plan.plans).length,function(e){return a("option",{key:e,domProps:{value:e-1}},[t._v("\n                方案"+t._s(e)+"\n              ")])}))]):t._e(),t._v(" "),a("div",{staticClass:"cd-transfer"}),t._v(" "),a("div",{staticClass:"cd-main"},[a("div",{attrs:{type:"simple"}},[t._m(0,!0),t._v(" "),a("p",[t._v(t._s(e.detail.name))]),t._v(" "),a("p",{staticClass:"sm"},[t._v(t._s(e.detail.address))])]),t._v(" "),a("div",{attrs:{type:"detail"}})]),t._v(" "),a("div",{staticClass:"cd-footer"},[a("button",{attrs:{href:"#"},on:{click:function(e){t.$emit("setCenter",n)}}},[a("i",{staticClass:"iconfont icon-androidlocate"})]),t._v(" "),t._m(1,!0),t._v(" "),a("button",{attrs:{href:"#"},on:{click:function(e){t.$emit("moveTo",n,null)}}},[a("i",{staticClass:"iconfont icon-delete color-alert"})])])])]})],2)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"iconfont icon-more"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{attrs:{href:"#"}},[e("i",{staticClass:"iconfont icon-move"})])}]};var _=a("Z0/y")(v,y,!1,function(t){a("+tHt")},"data-v-17d6555f",null).exports,g=a("rVsN"),w=a.n(g),$={name:"Searchbar",data:function(){return{keyWord:"",suggests:[],page:1,lastSearch:null}},watch:{keyWord:function(){if(!this.lastSearch||this.lastSearch.getTime()-(new Date).getTime()<=-300){this.lastSearch=new Date;var t=this;this.$store.state.AMap_PlaceSearch.search.search(this.keyWord,function(e,a){"complete"==e&&a.poiList.count>0?t.suggests=a.poiList.pois:console.log(a)})}}},methods:{searchChecked:function(t){var e={id:t.id,name:t.name,lnglat:t.location,type:t.type};this.$emit("searchChecked",e),this.keyWord=""}}},P={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"Searchbar"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.keyWord,expression:"keyWord"}],attrs:{type:"search",name:"searchPOI",id:"searchTile",placeholder:"搜索景点.."},domProps:{value:t.keyWord},on:{input:function(e){e.target.composing||(t.keyWord=e.target.value)}}}),t._v(" "),a("transition",{attrs:{name:"list"}},[""!=t.keyWord?a("div",{attrs:{id:"searchResult"}},[a("ul",[t._l(t.suggests,function(e){return[a("div",{key:e.id,staticClass:"suggest",on:{click:function(a){t.searchChecked(e)}}},[a("span",{attrs:{type:"name"}},[t._v(t._s(e.name))]),t._v(" "),a("span",{attrs:{type:"location"}},[t._v(t._s(e.address))])])]})],2)]):t._e()])],1)},staticRenderFns:[]};var I=a("Z0/y")($,P,!1,function(t){a("kK4M")},"data-v-5c597b58",null).exports,D=(a("i8gr"),{name:"Mapcontainer",components:{Searchbar:I},data:function(){return{count:0,map:{}}},created:function(){var t=this;this.$parent.$on("updateTransferPlan",function(e,a){var n=t.$store.state.POIs[t.$store.state.nowDay][e-1].detail.location,r=t.$store.state.POIs[t.$store.state.nowDay][e].detail.location;t.createTransferObj(n,r,a).then(function(a){t.$store.commit({type:"updateTransferPlan",newTransfer:a,index:e})})}),this.$parent.$on("updateTransferIndex",function(e,a){var n=t.$store.state.POIs[t.$store.state.nowDay][e].transfer,r=t.drawResultOnMap(n.plan,a,n.type);t.$store.commit({type:"updateTransferIndex",newRoutes:r,index:e,transferIndex:a})}),this.$parent.$on("setCenter",function(e){var a=t.$store.state.POIs[t.$store.state.nowDay][e].marker.getPosition();t.map.panTo(a)}),this.$parent.$on("moveTo",function(e,a){var n=t.$store.state.POIs[t.$store.state.nowDay][e];n.marker.hide();for(var r=0;n.transfer&&r<n.transfer.routes.length;r++)n.transfer.routes[r].hide();if(t.$store.commit("wipe",e),null===a){n=null;var s=t.$store.state.POIs[t.$store.state.nowDay][e-1]||null,o=t.$store.state.POIs[t.$store.state.nowDay][e]||null;s&&o?t.createTransferObj(s.detail.location,o.detail.location,o.transfer.type).then(function(a){t.$store.commit({type:"updateTransferPlan",newTransfer:a,index:e})}):o&&t.$store.commit({type:"updateTransferPlan",newTransfer:null,index:e})}else{var i=t.$store.state.POIs[t.$store.state.nowDay][e-1]||null,l=t.$store.state.POIs[t.$store.state.nowDay][e]||null;i&&l?t.createTransferObj(i.detail.location,l.detail.location,l.transfer.type).then(function(a){t.$store.commit({type:"updateTransferPlan",newTransfer:a,index:e})}):l&&t.$store.commit({type:"updateTransferPlan",newTransfer:null,index:e});var c=t.$store.state.POIs[a];if(0!=c.length){var d=c[c.length-1].detail.location,u=n.detail.location;t.createTransferObj(d,u,"driving").then(function(e){n.transfer=e;for(var r=0;r<e.routes.length;r++)e.routes[r].hide();t.$store.dispatch({type:"addPOIFromMap",data:n,dayTo:a})})}else n.transfer=null,t.$store.dispatch({type:"addPOIFromMap",data:n,dayTo:a})}}),this.$parent.$on("sort",function(e,a){var n=t.$store.state.POIs[t.$store.state.nowDay][e],r=t.$store.state.POIs[t.$store.state.nowDay][e-1]||null,s=t.$store.state.POIs[t.$store.state.nowDay][e+1]||null;if(r&&s){var o=r.detail.location,i=s.detail.location;t.createTransferObj(o,i,"driving").then(function(a){t.$store.commit("updateTransferPlan",{newTransfer:a,index:e+1})})}else s&&t.$store.commit("updateTransferPlan",{newTransfer:null,index:e+1});t.$store.commit("sortItem",{oldIndex:e,newIndex:a});var l=t.$store.state.POIs[t.$store.state.nowDay][a-1]||null;if(l){var c=l.detail.location,d=n.detail.location;t.createTransferObj(c,d,"driving").then(function(e){t.$store.commit("updateTransferPlan",{newTransfer:e,index:a})})}else t.$store.commit("updateTransferPlan",{newTransfer:null,index:a});var u=t.$store.state.POIs[t.$store.state.nowDay][a+1]||null;if(u){var f=n.detail.location,p=u.detail.location;t.createTransferObj(f,p,"driving").then(function(e){t.$store.commit("updateTransferPlan",{newTransfer:e,index:a+1})})}})},mounted:function(){var t=new AMap.Map("map",{resizeEnable:!0,zoom:11,center:[116.397428,39.90923],animateEnable:!0,mapStyle:"amap://styles/fe7d1f157e05c97d6930995928e4f39d"});this.map=t;var e=this.$store.state.AMap_PlaceSearch.config,a=new AMap.PlaceSearch(e);this.$store.commit("setPlaceSearch",{config:e,search:a});var n=this;t.on("hotspotclick",function(t){n.createInfoWindow(t)})},methods:{createInfoWindow:function(t){var e=document.createElement("div"),a='<div id="infoWindow">        <span class="infoName">'+t.name+'</span>        <span id="infoAction">          <i class="iconfont icon-plus"></i>        </span>      </div>      <div id="infoWindowArrow">        <div></div>      </div>';e.innerHTML+=a;var n=this;e.querySelector("#infoAction").onclick=function(e){n.addPOIToData(t)},new AMap.InfoWindow({isCustom:!0,content:e,offset:new AMap.Pixel(0,-10),closeWhenClickMap:!0,autoMove:!0}).open(this.map,t.lnglat)},drawResultOnMap:function(t,e,a){var n=[];if("driving"===a){for(var r=[],s=0;s<t.routes[e].steps.length;s++)for(var o=0;o<t.routes[e].steps[s].path.length;o++)r.push(t.routes[e].steps[s].path[o]);var i=new AMap.Polyline({map:this.map,isOutline:!0,outlineColor:"#FFFFFF",strokeWeight:5,strokeColor:"#13afc8",showDir:!0,lineJoin:"round",path:r});return n.push(i),n}if("bus"===a){for(var l=t.plans[e],c=0;c<l.segments.length;c++){var d=new AMap.Polyline({map:this.map,isOutline:!0,outlineColor:"#FFFFFF",strokeWeight:5,strokeColor:"BUS"==l.segments[c].transit_mode?"#2775b6":"#fed71a",showDir:!0,lineJoin:"round",path:l.segments[c].transit.path});n.push(d)}return n}if("ride"===a){for(var u=t.routes[e],f=[],p=0;p<u.rides.length;p++)for(var m=0;m<u.rides[p].path.length;m++)f.push(u.rides[p].path[m]);var h=new AMap.Polyline({map:this.map,isOutline:!0,outlineColor:"#FFFFFF",strokeWeight:5,strokeColor:"#21a265",showDir:!0,lineJoin:"round",path:f});return n.push(h),n}if("walk"===a){for(var v=t.routes[e],y=[],_=0;_<v.steps.length;_++)for(var g=0;g<v.steps[_].path.length;g++)y.push(v.steps[_].path[g]);var w=new AMap.Polyline({map:this.map,isOutline:!0,outlineColor:"#FFFFFF",strokeWeight:5,strokeColor:"#fed71a",showDir:!0,lineJoin:"round",path:y});return n.push(w),n}},createTransferObj:function(t,e,a){var n=this;return new w.a(function(r,s){var o={type:"",index:0,kit:{},plan:{},routes:{}};if("driving"===a){o.type="driving";var i=new AMap.Driving(n.$store.state.AMap_Driving);o.kit=i,i.search(t,e,function(t,e){"complete"==t?(o.plan=e,o.routes=n.drawResultOnMap(e,0,"driving"),r(o)):(console.log(e),s())})}else if("bus"===a){o.type="bus",n.$store.state.AMap_Bus.city=n.$store.state.city;var l=new AMap.Transfer(n.$store.state.AMap_Bus);o.kit=l,l.search(t,e,function(t,e){"complete"==t?(o.plan=e,o.routes=n.drawResultOnMap(e,0,"bus"),r(o)):s(e)})}else if("ride"===a){o.type="ride";var c=new AMap.Riding(n.$store.state.AMap_Ride);o.kit=c,c.search(t,e,function(t,e){"complete"==t?(o.plan=e,o.routes=n.drawResultOnMap(e,0,"ride"),r(o)):s(e)})}else if("walk"===a){o.type="walk";var d=new AMap.Walking(n.$store.state.AMap_Walk);o.kit=d,d.search(t,e,function(t,e){"complete"==t?(o.plan=e,o.routes=n.drawResultOnMap(e,0,"walk"),r(o)):s(e)})}})},addPOIToData:function(t){for(var e=this.$store.state.POIs,a=0;a<e.length;a++)for(var n=0;n<e[a].length;n++)if(e[a][n].id==t.id)return;var r=this,s=new AMap.Marker({map:r.map,position:t.lnglat,animation:"AMAP_ANIMATION_DROP",title:t.name});s.show();var o=this.$store.state.POIs[this.$store.state.nowDay],i={id:t.id,marker:s,transfer:null};o.length>0?this.createTransferObj(o[o.length-1].detail.location,t.lnglat,"driving").then(function(t){console.log(t),i.transfer=t,r.$store.dispatch({type:"addPOIFromMap",data:i})}).catch(function(t){console.log(t)}):r.$store.dispatch({type:"addPOIFromMap",data:i})}}}),k={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"Mapcontainer"}},[e("div",{attrs:{id:"map"}}),this._v(" "),e("Searchbar",{on:{searchChecked:this.createInfoWindow}})],1)},staticRenderFns:[]};var T={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"Daytransmit"}},[a("div",{staticClass:"header"},[t._v("拖动至此处分发到其他日期")]),t._v(" "),a("ul",t._l(t.$store.state.totalDays,function(e){return e-1!=t.$store.state.nowDay?a("div",{key:e,staticClass:"item",attrs:{dayIndex:e-1},on:{dragover:function(t){t.preventDefault()},drop:function(e){e.preventDefault(),t.moveTo(e)}}},[1==e||e-2==t.$store.state.nowDay&&e-1==1?t._e():a("div",{staticClass:"item-line"}),t._v(" "),a("i",{staticClass:"item-icon iconfont icon-right"}),t._v("\n      第"+t._s(e)+"天\n    ")]):t._e()}))])},staticRenderFns:[]};var O={name:"Roadpage",components:{Detailpath:_,Mapcontainer:a("Z0/y")(D,k,!1,function(t){a("75eU")},null,null).exports,Daytransmit:a("Z0/y")({name:"Daytransmit",data:function(){return{}},methods:{moveTo:function(t){var e=t.dataTransfer.getData("ItemIndex");this.$emit("moveTo",e,t.target.getAttribute("dayIndex"))}}},T,!1,function(t){a("UFyb")},"data-v-002b6210",null).exports},data:function(){return{onDrag:!1}},methods:{updateTransferPlan:function(t,e){this.$emit("updateTransferPlan",t,e)},updateTransferIndex:function(t,e){this.$emit("updateTransferIndex",t,e)},setCenter:function(t){this.$emit("setCenter",t)},moveTo:function(t,e){this.$emit("moveTo",t,e)},sort:function(t,e){this.$emit("sort",t,e)}}},x={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"Roadpage"}},[a("Mapcontainer"),t._v(" "),t.onDrag?a("Daytransmit",{on:{moveTo:t.moveTo}}):t._e(),t._v(" "),a("Detailpath",{on:{updateTransferPlan:t.updateTransferPlan,setCenter:t.setCenter,moveTo:t.moveTo,drag:function(e){t.onDrag=!t.onDrag},sort:t.sort}})],1)},staticRenderFns:[]};var M=a("Z0/y")(O,x,!1,function(t){a("Tttt")},"data-v-4ca21c82",null).exports;n.default.use(d.a);var C=new d.a({routes:[{path:"/",name:"Roadpage",component:M,meta:{keepAlive:!0}},{path:"/setting",name:"Setting",component:p}],linkExactActiveClass:"active"}),b=a("UM93"),F=a.n(b);a("bTWF");n.default.use(r.a),n.default.use(F.a),n.default.config.productionTip=!1;var A=new r.a.Store({state:{city:"",totalDays:1,nowDay:0,POIs:[[]],AMap_PlaceSearch:{config:{city:"全国"},search:{}},AMap_Driving:{policy:AMap.DrivingPolicy.LEAST_TIME,hideMarkers:!0,autoFitView:!1,showTraffic:!1},AMap_Bus:{city:"",hideMarkers:!0,autoFitView:!1},AMap_Ride:{hideMarkers:!0,autoFitView:!1},AMap_Walk:{hideMarkers:!0,autoFitView:!1}},mutations:{setPlaceSearch:function(t,e){console.log(e),t.AMap_PlaceSearch.config=e.config,t.AMap_PlaceSearch.search=e.search},addNewDay:function(t){t.totalDays++,t.POIs.push([])},switchDay:function(t,e){if(e<t.totalDays&&e>=0){for(var a=t.POIs[t.nowDay],n=0;n<a.length;n++)if(a[n].marker.hide(),a[n].transfer)for(var r=0;r<a[n].transfer.routes.length;r++)a[n].transfer.routes[r].hide();for(var s=t.POIs[e],o=0;o<s.length;o++)if(s[o].marker.show(),s[o].transfer)for(var i=0;i<s[o].transfer.routes.length;i++)s[o].transfer.routes[i].show();t.nowDay=e}},deleteDay:function(t,e){if(e<t.totalDays&&e>=0){for(var a=0;a<t.POIs[e].length;a++)t.POIs[e][a].marker.hide(),t.POIs[e][a].transfer&&t.POIs[e][a].transfer.routes.hide();if(t.POIs.splice(e,1),t.totalDays--,t.nowDay==e){t.nowDay>0&&t.nowDay--;for(var n=0;n<t.POIs[t.nowDay].length;n++)t.POIs[t.nowDay][n].marker.show(),t.POIs[t.nowDay][n].transfer&&t.POIs[t.nowDay][n].transfer.routes.show()}}},addPOIFromMap:function(t,e){e.dayTo?t.POIs[e.dayTo].push(e.data):t.POIs[t.nowDay].push(e.data)},updateTransferPlan:function(t,e){if(t.POIs[t.nowDay][e.index].transfer){console.log("clear old path");for(var a=t.POIs[t.nowDay][e.index].transfer.routes,n=0;n<a.length;n++)a[n].hide()}t.POIs[t.nowDay][e.index].transfer=e.newTransfer},updateTransferIndex:function(t,e){var a=t.POIs[t.nowDay][e.index];a.transfer.routes=e.newRoutes,a.transfer.index=e.transferIndex},wipe:function(t,e){t.POIs[t.nowDay].splice(e,1)},sortItem:function(t,e){var a=t.POIs[t.nowDay];a.splice(e.newIndex,0,a.splice(e.oldIndex,1)[0])}},actions:{addPOIFromMap:function(t,e){console.log(e),e.data.detail?(console.log("moveIN"),console.log(e.dayTo),t.commit("addPOIFromMap",e)):t.state.AMap_PlaceSearch.search.getDetails(e.data.id,function(a,n){"complete"==a?(e.data.detail=n.poiList.pois[0],t.commit("addPOIFromMap",e)):(console.log(n),t.commit("addPOIFromMap",e))})}}});new n.default({el:"#app",router:C,store:A,components:{App:c},template:"<App/>"})},RtWC:function(t,e){},Tttt:function(t,e){},UFyb:function(t,e){},bTWF:function(t,e){},kK4M:function(t,e){},xxql:function(t,e){},zpZT:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.929629f6c3dd4b43f87d.js.map